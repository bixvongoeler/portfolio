---
import { siteConfig } from "../config";
import SectionLayout from "./SectionLayout.astro";
import SectionHeader from "./SectionHeader.astro";
import GitHubRepoLink from "./GitHubRepoLink.astro";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
---

{
    hasProjects && (
        <SectionLayout id="projects">
            <SectionHeader title="Projects" />

            <div class="lg:col-span-8">
                <div class="space-y-8">
                    {siteConfig.projects.map((project, index) => {
                        const Component = project.link ? "a" : "div";
                        const linkProps = project.link
                            ? {
                                  href: project.link,
                                  target: "_blank",
                                  rel: "noopener noreferrer",
                              }
                            : {};

                        return (
                            <div class="group relative">
                                <Component
                                    {...linkProps}
                                    data-tilt={siteConfig.tiltEffect?.enabled ? "" : undefined}
                                    data-tilt-max={siteConfig.tiltEffect?.max}
                                    data-tilt-speed={siteConfig.tiltEffect?.speed}
                                    data-tilt-perspective={siteConfig.tiltEffect?.perspective}
                                    class={`block relative p-4 sm:p-6 md:p-8 bg-gray-50 dark:bg-slate-800 rounded-xl sm:rounded-2xl border border-gray-200 dark:border-slate-700 transition-all duration-300 ${
                                        project.link
                                            ? "hover:bg-white dark:hover:bg-slate-900 hover:shadow-xl dark:hover:shadow-[0_20px_50px_-12px_rgba(255,255,255,0.15)] hover:border-gray-300 dark:hover:border-slate-500 hover:-translate-y-1"
                                            : ""
                                    }`}
                                >
                                    {project.repo && <GitHubRepoLink repo={project.repo} />}

                                    <div class="space-y-4">
                                        <div>
                                            <span class="text-sm font-mono text-[var(--accent-color)]">
                                                0{index + 1}
                                            </span>
                                            <h3 class="text-xl sm:text-2xl font-bold text-gray-900 dark:text-slate-50 mt-1">
                                                {project.name}
                                            </h3>
                                        </div>

                                        <p class="text-base sm:text-lg text-gray-600 dark:text-slate-400 leading-relaxed">
                                            {project.description}
                                        </p>

                                        {project.skills && project.skills.length > 0 && (
                                            <div class="flex flex-wrap gap-1.5 sm:gap-2 pt-2">
                                                {project.skills.map((skill) => (
                                                    <span
                                                        class={`px-2.5 sm:px-3 py-1 sm:py-1.5 bg-gray-900 dark:bg-slate-600 text-white rounded-lg sm:rounded-xl text-xs sm:text-sm font-medium border border-gray-700 dark:border-slate-500 transition-all duration-300 ${
                                                            project.link
                                                                ? "group-hover:bg-gray-800 dark:group-hover:bg-slate-500"
                                                                : ""
                                                        }`}
                                                    >
                                                        {skill}
                                                    </span>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                </Component>
                            </div>
                        );
                    })}
                </div>
            </div>
        </SectionLayout>
    )
}
