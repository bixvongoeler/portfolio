---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 p-2 sm:p-[clamp(0.5rem,2vw,1rem)]">
    <nav class="px-3 sm:px-[clamp(1rem,3vw,2rem)] py-2 sm:py-[clamp(0.5rem,1.5vw,1rem)] bg-white/80 dark:bg-slate-900/80 backdrop-blur-md rounded-2xl shadow-lg border border-gray-200/50 dark:border-slate-700/50">
        <!-- Mobile header -->
        <div class="flex sm:hidden items-center justify-between">
            <!-- Hamburger button -->
            <button
                id="mobile-menu-toggle"
                type="button"
                aria-label="Toggle menu"
                class="w-9 h-9 flex items-center justify-center rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors duration-200"
            >
                <!-- Hamburger icon -->
                <svg
                    id="hamburger-icon"
                    class="w-5 h-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M4 6h16M4 12h16M4 18h16"></path>
                </svg>
                <!-- Close icon -->
                <svg
                    id="close-icon"
                    class="w-5 h-5 hidden"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M6 18L18 6M6 6l12 12"></path>
                </svg>
            </button>

            <!-- Centered name -->
            <span class="text-sm font-medium text-gray-700 dark:text-gray-300 lowercase">
                {siteConfig.name.toLowerCase()}
            </span>

            <!-- Theme toggle -->
            <button
                id="theme-toggle-mobile"
                type="button"
                aria-label="Toggle dark mode"
                class="w-9 h-9 flex items-center justify-center rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors duration-200"
            >
                <svg
                    class="hidden dark:block w-5 h-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <svg
                    class="block dark:hidden w-5 h-5"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </button>
        </div>

        <!-- Mobile menu (expandable) -->
        <div id="mobile-menu" class="hidden sm:hidden">
            <ul class="flex flex-col gap-2 pt-4 pb-2 border-t border-gray-200/50 dark:border-slate-700/50 mt-2">
                <li>
                    <a href="#about" class="block py-2 px-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors font-medium">
                        About
                    </a>
                </li>
                {hasProjects && (
                    <li>
                        <a href="#projects" class="block py-2 px-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors font-medium">
                            Projects
                        </a>
                    </li>
                )}
                {hasExperience && (
                    <li>
                        <a href="#experience" class="block py-2 px-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors font-medium">
                            Experience
                        </a>
                    </li>
                )}
                {hasEducation && (
                    <li>
                        <a href="#education" class="block py-2 px-3 rounded-lg text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors font-medium">
                            Education
                        </a>
                    </li>
                )}
            </ul>
        </div>

        <!-- Desktop header -->
        <div class="hidden sm:flex items-center justify-between">
            <!-- Spacer for centering -->
            <div class="w-[clamp(2rem,4vw,2.5rem)]"></div>

            <!-- Navigation links (centered) -->
            <ul class="flex items-center gap-[clamp(1rem,3vw,2.5rem)] text-[clamp(0.8rem,1.5vw,1rem)] justify-center flex-1">
                <li>
                    <a href="#about" class="text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium">
                        About
                    </a>
                </li>
                {hasProjects && (
                    <li>
                        <a href="#projects" class="text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium">
                            Projects
                        </a>
                    </li>
                )}
                {hasExperience && (
                    <li>
                        <a href="#experience" class="text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium">
                            Experience
                        </a>
                    </li>
                )}
                {hasEducation && (
                    <li>
                        <a href="#education" class="text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium">
                            Education
                        </a>
                    </li>
                )}
            </ul>

            <!-- Theme toggle button -->
            <button
                id="theme-toggle"
                type="button"
                aria-label="Toggle dark mode"
                class="w-[clamp(2rem,4vw,2.5rem)] h-[clamp(2rem,4vw,2.5rem)] flex items-center justify-center rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors duration-200"
            >
                <svg
                    class="hidden dark:block w-[clamp(1rem,2vw,1.25rem)] h-[clamp(1rem,2vw,1.25rem)]"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"></path>
                </svg>
                <svg
                    class="block dark:hidden w-[clamp(1rem,2vw,1.25rem)] h-[clamp(1rem,2vw,1.25rem)]"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path stroke-linecap="round" stroke-linejoin="round" d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"></path>
                </svg>
            </button>
        </div>
    </nav>
</header>

<script>
    // Mobile menu toggle
    const menuToggle = document.getElementById("mobile-menu-toggle");
    const mobileMenu = document.getElementById("mobile-menu");
    const hamburgerIcon = document.getElementById("hamburger-icon");
    const closeIcon = document.getElementById("close-icon");

    menuToggle?.addEventListener("click", () => {
        const isOpen = !mobileMenu?.classList.contains("hidden");
        mobileMenu?.classList.toggle("hidden", isOpen);
        hamburgerIcon?.classList.toggle("hidden", !isOpen);
        closeIcon?.classList.toggle("hidden", isOpen);
    });

    // Close menu when clicking a link
    mobileMenu?.querySelectorAll("a").forEach(link => {
        link.addEventListener("click", () => {
            mobileMenu?.classList.add("hidden");
            hamburgerIcon?.classList.remove("hidden");
            closeIcon?.classList.add("hidden");
        });
    });

    // Theme toggle functionality for both buttons
    const themeToggle = document.getElementById("theme-toggle");
    const themeToggleMobile = document.getElementById("theme-toggle-mobile");

    const toggleTheme = () => {
        const currentTheme = (window as any).__getTheme();
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        (window as any).__setTheme(newTheme, true);
    };

    themeToggle?.addEventListener("click", toggleTheme);
    themeToggleMobile?.addEventListener("click", toggleTheme);
</script>

<style>
    html {
        scroll-behavior: smooth;
    }
</style>
