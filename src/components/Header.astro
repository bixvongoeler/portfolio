---
import { siteConfig } from "../config";

const hasProjects = siteConfig.projects && siteConfig.projects.length > 0;
const hasExperience = siteConfig.experience && siteConfig.experience.length > 0;
const hasEducation = siteConfig.education && siteConfig.education.length > 0;
---

<header id="header" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300">
    <nav class="max-w-7xl mx-auto px-[clamp(1rem,3vw,2rem)] py-[clamp(0.75rem,2vw,1.5rem)]">
        <div class="flex items-center justify-between">
            <!-- Spacer for centering -->
            <div class="w-[clamp(0rem,4vw,2.5rem)]"></div>

            <!-- Navigation links (centered) -->
            <ul
                class="flex items-center gap-[clamp(0.5rem,3vw,2.5rem)] text-[clamp(0.85rem,2vw,1.2rem)] justify-center"
            >
                <li>
                    <a
                        href="#about"
                        class="text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium"
                    >
                        About
                    </a>
                </li>
                {
                    hasProjects && (
                        <li>
                            <a
                                href="#projects"
                                class=" text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium"
                            >
                                Projects
                            </a>
                        </li>
                    )
                }
                {
                    hasExperience && (
                        <li>
                            <a
                                href="#experience"
                                class=" text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium"
                            >
                                Experience
                            </a>
                        </li>
                    )
                }
                {
                    hasEducation && (
                        <li>
                            <a
                                href="#education"
                                class=" text-gray-700 dark:text-gray-300 hover:text-black dark:hover:text-white transition-colors font-medium"
                            >
                                Education
                            </a>
                        </li>
                    )
                }
            </ul>
            <!-- Theme toggle button -->
            <!-- <div class="w-[clamp(1rem,4vw,0rem)]"></div> -->
            <button
                id="theme-toggle"
                type="button"
                aria-label="Toggle dark mode"
                class="w-[clamp(2rem,4vw,3rem)] h-[clamp(2rem,4vw,3rem)] flex items-center justify-center rounded-full text-gray-700 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-slate-800 transition-colors duration-200"
            >
                <!-- Sun icon (shown in dark mode) -->
                <svg
                    class="hidden dark:block w-[clamp(1rem,2.5vw,1.75rem)] h-[clamp(1rem,2.5vw,1.75rem)]"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M12 3v1m0 16v1m9-9h-1M4 12H3m15.364 6.364l-.707-.707M6.343 6.343l-.707-.707m12.728 0l-.707.707M6.343 17.657l-.707.707M16 12a4 4 0 11-8 0 4 4 0 018 0z"
                    ></path>
                </svg>
                <!-- Moon icon (shown in light mode) -->
                <svg
                    class="block dark:hidden w-[clamp(1rem,2.5vw,1.75rem)] h-[clamp(1rem,2.5vw,1.75rem)]"
                    xmlns="http://www.w3.org/2000/svg"
                    fill="none"
                    viewBox="0 0 24 24"
                    stroke="currentColor"
                    stroke-width="2"
                >
                    <path
                        stroke-linecap="round"
                        stroke-linejoin="round"
                        d="M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"
                    ></path>
                </svg>
            </button>
        </div>
    </nav>
</header>

<script>
    // Scroll behavior for header background
    window.addEventListener("scroll", () => {
        const header = document.getElementById("header");
        if (window.scrollY > 100) {
            header?.classList.add("bg-white/80", "dark:bg-slate-900/80", "backdrop-blur-sm");
        } else {
            header?.classList.remove("bg-white/80", "dark:bg-slate-900/80", "backdrop-blur-sm");
        }
    });

    // Theme toggle functionality - userToggled=true saves to localStorage
    const themeToggle = document.getElementById("theme-toggle");
    themeToggle?.addEventListener("click", () => {
        const currentTheme = (window as any).__getTheme();
        const newTheme = currentTheme === "dark" ? "light" : "dark";
        (window as any).__setTheme(newTheme, true);
    });
</script>

<style>
    html {
        scroll-behavior: smooth;
    }
</style>
