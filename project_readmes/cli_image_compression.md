# CLI Image Compression and Editing: Project Involving Automated Testing

One of my favorite recent projects was creating a command line tool for image compression and manipulation in C for a machine/systems engineering class I took. The tool operates on the PPM image format and is called from the command line, allowing for a variety of options for compressing, mirroring, rotating, transforming, or resizing images.

Libraries: For this project I created two libraries — a 2d unboxed array method class with blocked, column, and row major subclasses for storing pixel data, and a bitpacking library for compression. Both libraries use principles of polymorphic design in C using well documented interfaces. The underlying data is stored using private structs passed with void pointers to abstract the underlying representation away from the calling program.

Architecture: The program is run from the command line using a number of flags to specify operations. The specified PPM image file is converted to a 2d unboxed array and then sent to a variety of helper functions responsible for implementing the desired operations. The compression operation was the most complex to implement and requires a number of steps. It starts by converting the pixel data from rgb to component video format. Then each 2x2 block of pixels undergoes a series of transformations packing it into a 32 bit word by using the discrete cosign transform and quantization. The compressed image is then written as a series of words.

Testing: In order to test this program I created two tools. The first is an automated unit testing suite using C preprocessor macros to allow each test to be given a name and added to a list before runtime, and a shell script which calls each test with and without valgrind, printing the test name and results to the terminal, and saving any error messages to log files. The second tool relies on a number of image files, and performs compression and decompression on each file, calculating the compression ratio, time taken, and mean square difference of the original and decompressed images to ensure compression quality. By creating these custom tools I was able to efficiently and accurately test the programs validity and quality of output while saving myself a lot of time.
